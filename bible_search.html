<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>75 Hard Bible Edition - Bible Search</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    :root {
      --bg-light: #f9fafb;
      --text-light: #1f2937;
      --card-bg: #ffffff;
      --accent: #f4c430;
      --nav-bg: #1e293b;
      --nav-hover: #334155;
    }
    [data-theme="dark"] {
      --bg-light: #1f2937;
      --text-light: #f9fafb;
      --card-bg: #2e3a4e;
      --accent: #f4c430;
      --nav-bg: #334155;
      --nav-hover: #1e293b;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; padding: 0; font-family: 'Inter', sans-serif;
      background: var(--bg-light); color: var(--text-light);
      transition: background 0.3s, color 0.3s;
    }
    header {
      display: flex; justify-content: space-between; align-items: center;
      padding: 1rem 2rem; background: var(--card-bg);
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    header nav { display: flex; gap: 1rem; }
    header nav a {
      text-decoration: none; padding: 0.5rem 1rem;
      background-color: var(--nav-bg); color: white;
      border-radius: 6px; font-weight: 500;
    }
    header nav a:hover { background-color: var(--nav-hover); }
    .theme-toggle {
      cursor: pointer; background: var(--accent); border: none;
      padding: 0.5rem; border-radius: 50%; font-size: 1.2rem;
    }
    main {
      padding: 2rem; max-width: 800px; margin: 0 auto;
    }
    .search-container {
      display: flex; gap: 0.5rem;
      flex-wrap: wrap; justify-content: center;
      margin-bottom: 2rem;
    }
    .search-container select,
    .search-container button {
      padding: 0.75rem 1rem; font-size: 1rem;
      border-radius: 6px; border: 1px solid #ccc;
    }
    .search-container select { width: 200px; }
    .search-container button {
      background-color: var(--accent);
      color: var(--text-light); border: none; cursor: pointer;
    }
    .search-container button:hover { opacity: 0.9; }
    #bibleContent { text-align: left; }
    #bibleContent h2 {
      font-size: 1.75rem; border-bottom: 2px solid var(--accent);
      padding-bottom: 0.25rem;
    }
    details {
      background: var(--card-bg); margin-bottom: 1rem;
      padding: 0.75rem; border-radius: 6px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    summary {
      cursor: pointer; font-weight: 600; font-size: 1.1rem;
      outline: none;
    }
    summary::-webkit-details-marker { display: none; }
    details[open] summary::after { content: 'â–¼'; float: right; }
    summary::after { content: 'â–¶'; float: right; }
    details div p { margin: 0.25rem 0; }
    .error {
      color: #e53e3e; font-weight: 500;
      margin-top: 1rem; text-align: center;
    }
    footer {
      text-align: center; padding: 1rem;
      font-size: 0.85rem; color: #6b7280;
    }
  </style>
</head>
<body data-theme="light">
  <header>
    <nav>
      <a href="index.html">Home</a>
      <a href="journal.html">Journal</a>
      <a href="prayer-generator.html">Prayer</a>
      <a href="past-entries.html">Past</a>
      <a href="scripture-search.html">Scripture</a>
      <a href="bible_search.html">Bible</a>
      <a href="streak.html">Streak</a>
      <a href="register.html">Account</a>
    </nav>
    <button class="theme-toggle" title="Toggle theme">ðŸŒ—</button>
  </header>

  <main>
    <h1>75 Hard Bible Edition</h1>
    <div class="search-container">
      <select id="bookSelect">
        <option disabled selected>Select a book</option>
      </select>
      <select id="versionSelect">
        <option value="web">WEB</option>
        <option value="esv">ESV</option>
        <option value="kjv">KJV</option>
        <option value="asv">ASV</option>
        <option value="bbe">BBE</option>
      </select>
      <button id="searchBtn">Search</button>
    </div>

    <div id="bibleContent"></div>
  </main>

  <footer>Â© 2025 75 Hard Bible Edition. All rights reserved.</footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Theme toggle
      document.querySelector('.theme-toggle').addEventListener('click', () => {
        const body = document.body;
        body.dataset.theme = body.dataset.theme === 'light' ? 'dark' : 'light';
      });

      // Books map
      const books = [
        'Genesis','Exodus','Leviticus','Numbers','Deuteronomy','Joshua','Judges','Ruth',
        '1 Samuel','2 Samuel','1 Kings','2 Kings','1 Chronicles','2 Chronicles','Ezra',
        'Nehemiah','Esther','Job','Psalms','Proverbs','Ecclesiastes','Song of Solomon',
        'Isaiah','Jeremiah','Lamentations','Ezekiel','Daniel','Hosea','Joel','Amos',
        'Obadiah','Jonah','Micah','Nahum','Habakkuk','Zephaniah','Haggai','Zechariah','Malachi',
        'Matthew','Mark','Luke','John','Acts','Romans','1 Corinthians','2 Corinthians',
        'Galatians','Ephesians','Philippians','Colossians','1 Thessalonians','2 Thessalonians',
        '1 Timothy','2 Timothy','Titus','Philemon','Hebrews','James','1 Peter','2 Peter',
        '1 John','2 John','3 John','Jude','Revelation'
      ];

      // Populate book select
      const bookSelect = document.getElementById('bookSelect');
      books.forEach(book => {
        const opt = document.createElement('option');
        opt.value = book;
        opt.textContent = book;
        bookSelect.appendChild(opt);
      });

      // Search handler
      document.getElementById('searchBtn').addEventListener('click', async () => {
        const book = bookSelect.value;
        const version = document.getElementById('versionSelect').value;
        const container = document.getElementById('bibleContent');
        container.innerHTML = '';
        if (!book) {
          container.innerHTML = '<div class="error">Please select a book.</div>';
          bookSelect.focus();
          return;
        }
        container.innerHTML = '<div class="error">Loading...</div>';
        try {
          const url = `https://bible-api.com/${encodeURIComponent(book)}?translation=${version}`;
          const res = await fetch(url);
          if (!res.ok) throw new Error(`${res.status} ${res.statusText}`);
          const data = await res.json();
          if (data.error) throw new Error(data.error);
          container.innerHTML = `<h2>${book} (${version.toUpperCase()})</h2>`;
          // Render verses grouped by chapter
          let currentChap = 0;
          data.verses.forEach(v => {
            if (v.chapter !== currentChap) {
              currentChap = v.chapter;
              const details = document.createElement('details');
              const summary = document.createElement('summary');
              summary.textContent = `Chapter ${currentChap}`;
              details.appendChild(summary);
              container.appendChild(details);
            }
            const lastDetail = container.querySelector('details:last-of-type');
            const p = document.createElement('p');
            p.innerHTML = `<sup>${v.chapter}:${v.verse}</sup> ${v.text.trim()}`;
            lastDetail.appendChild(p);
          });
        } catch (err) {
          container.innerHTML = `<div class="error">Error: ${err.message}</div>`;
        }
      });
    });
  </script>
</body>
</html>
