<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Daily Journal</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: #f9fafb;
      color: #1f2937;
      padding: 2rem;
      max-width: 700px;
      margin: auto;
    }

    /* Navigation */
    .nav-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }

    .nav-links {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }

    nav a {
      text-decoration: none;
      padding: 0.5rem 1rem;
      background-color: #1e293b;
      color: white;
      border-radius: 6px;
      font-weight: 500;
    }

    .hamburger {
      display: none;
      flex-direction: column;
      cursor: pointer;
    }

    .hamburger div {
      width: 25px;
      height: 3px;
      background-color: #1e293b;
      margin: 4px 0;
    }

    @media (max-width: 768px) {
      .nav-links {
        display: none;
        flex-direction: column;
        width: 100%;
      }

      .nav-links.show {
        display: flex;
      }

      .hamburger {
        display: flex;
      }
    }

    h1 {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 1rem;
    }

    .verse-display {
      background: #eef2ff;
      padding: 1rem;
      border-radius: 6px;
      margin-bottom: 1.5rem;
      font-size: 0.95rem;
      text-align: center;
    }

    .timer-section {
      background: #e0f2fe;
      padding: 1rem;
      border-radius: 6px;
      margin-bottom: 2rem;
      text-align: center;
    }

    .timer-display {
      font-size: 1.5rem;
      font-weight: bold;
      margin: 1rem 0;
    }

    label {
      font-weight: 600;
    }

    input, textarea {
      width: 100%;
      padding: 0.75rem;
      margin-bottom: 1rem;
      border-radius: 6px;
      border: 1px solid #ccc;
      background: white;
      font-size: 1rem;
    }

    button {
      padding: 0.75rem 1.5rem;
      background-color: #1e40af;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
    }
  </style>
</head>
<body>

  <div class="nav-container">
    <div class="hamburger" onclick="toggleMenu()">
      <div></div>
      <div></div>
      <div></div>
    </div>
    <nav class="nav-links" id="mobileNav">
      <a href="index.html">Home</a>
      <a href="journal.html">Journal</a>
      <a href="prayer-generator.html">Prayer Generator</a>
      <a href="past-entries.html">Past Entries</a>
      <a href="scripture-search.html">Scripture Search</a>
    </nav>
  </div>

  <h1>Today's Journal</h1>

  <div class="verse-display" id="verseDisplay">Loading your chapters...</div>

  <div class="timer-section">
    <label for="timerMinutes">Set Timer (minutes):</label>
    <input type="number" id="timerMinutes" min="1" max="120" step="1" value="5" />
    <div class="timer-display" id="timerDisplay">05:00</div>
    <button onclick="toggleTimer()">Start / Pause</button>
  </div>

  <label for="oldTestament">Old Testament Book & Chapter</label>
  <input type="text" id="oldTestament" placeholder="e.g. Genesis 1">

  <label for="newTestament">New Testament Book & Chapter</label>
  <input type="text" id="newTestament" placeholder="e.g. Matthew 5">

  <label for="verse">Meaningful Verse</label>
  <input type="text" id="verse" placeholder="Type your standout verse">

  <label for="reflection">Reflection</label>
  <textarea id="reflection" rows="4" placeholder="Your thoughts..."></textarea>

  <label for="grat1">Gratitude 1</label>
  <input type="text" id="grat1">
  <label for="grat2">Gratitude 2</label>
  <input type="text" id="grat2">
  <label for="grat3">Gratitude 3</label>
  <input type="text" id="grat3">

  <button onclick="saveEntry()">Save Entry</button>

  <audio id="timerSound" src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg" preload="auto"></audio>

  <script>
    // Hamburger toggle
    function toggleMenu() {
      document.getElementById("mobileNav").classList.toggle("show");
    }

    // Timer Logic
    let timer = null;
    let remainingSeconds = 0;

    function toggleTimer() {
      const input = document.getElementById("timerMinutes");
      if (!timer) {
        const minutes = parseInt(input.value);
        if (isNaN(minutes) || minutes <= 0) return;

        remainingSeconds = minutes * 60;
        updateTimerDisplay();

        timer = setInterval(() => {
          if (remainingSeconds <= 0) {
            clearInterval(timer);
            timer = null;
            document.getElementById("timerDisplay").textContent = "Timeâ€™s up!";
            document.getElementById("timerSound").play();
          } else {
            remainingSeconds--;
            updateTimerDisplay();
          }
        }, 1000);
      } else {
        clearInterval(timer);
        timer = null;
      }
    }

    function updateTimerDisplay() {
      const mins = String(Math.floor(remainingSeconds / 60)).padStart(2, '0');
      const secs = String(remainingSeconds % 60).padStart(2, '0');
      document.getElementById("timerDisplay").textContent = `${mins}:${secs}`;
    }

    // Populate sessionStorage data and inputs
    window.addEventListener("DOMContentLoaded", () => {
      const old = sessionStorage.getItem("oldTestamentResult");
      const newT = sessionStorage.getItem("newTestamentResult");
      let display = '';

      if (old) {
        document.getElementById("oldTestament").value = old;
        display += `<strong>Today's Old Testament:</strong> ${old}`;
      }
      if (newT) {
        document.getElementById("newTestament").value = newT;
        display += `<br><strong>Today's New Testament:</strong> ${newT}`;
      }

      document.getElementById("verseDisplay").innerHTML = display || "No chapters loaded.";
    });

    // Save journal entry
    function saveEntry() {
      const entry = {
        date: new Date().toLocaleDateString(),
        oldTestament: document.getElementById("oldTestament").value,
        newTestament: document.getElementById("newTestament").value,
        verse: document.getElementById("verse").value,
        reflection: document.getElementById("reflection").value,
        gratitude: [
          document.getElementById("grat1").value,
          document.getElementById("grat2").value,
          document.getElementById("grat3").value
        ]
      };

      let entries = JSON.parse(localStorage.getItem("journalEntries")) || [];
      entries.push(entry);
      localStorage.setItem("journalEntries", JSON.stringify(entries));

      alert("Journal entry saved!");
      document.querySelectorAll("input, textarea").forEach(el => el.value = "");
      document.getElementById("timerDisplay").textContent = "00:00";
    }
  </script>
</body>
</html>
